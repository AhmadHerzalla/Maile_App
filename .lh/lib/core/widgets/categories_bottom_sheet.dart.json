{
    "sourceFile": "lib/core/widgets/categories_bottom_sheet.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1695387632888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1695387632888,
            "name": "Commit-0",
            "content": "import 'package:easy_localization/easy_localization.dart';\r\nimport 'package:final_projectt/core/services/catego_controller.dart';\r\nimport 'package:final_projectt/core/util/constants/colors.dart';\r\nimport 'package:final_projectt/core/widgets/custom_box.dart';\r\nimport 'package:final_projectt/models/catego_model.dart';\r\nimport 'package:flutter/material.dart';\r\n\r\nclass categoriesBottomSheet extends StatefulWidget {\r\n  const categoriesBottomSheet({super.key});\r\n\r\n  @override\r\n  State<categoriesBottomSheet> createState() => _categoriesBottomSheetState();\r\n}\r\n\r\nclass _categoriesBottomSheetState extends State<categoriesBottomSheet> {\r\n  late Future<List<CategoryElement>> categories;\r\n  int selectedIndex = 0;\r\n  late CategoryElement selectedCategory = CategoryElement(\r\n      id: 1,\r\n      name: 'Other',\r\n      createdAt: DateTime.now().toString(),\r\n      updatedAt: DateTime.now().toString(),\r\n      sendersCount: '',\r\n      senders: []);\r\n\r\n  @override\r\n  void initState() {\r\n    categories = getCatego();\r\n    super.initState();\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return SizedBox(\r\n      height: MediaQuery.of(context).size.height - 150,\r\n      child: Column(\r\n        children: [\r\n          Padding(\r\n            padding:\r\n                const EdgeInsetsDirectional.only(top: 15.0, start: 8, end: 8),\r\n            child: Row(\r\n              mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n              children: [\r\n                const IconButton(\r\n                  onPressed: null,\r\n                  icon: Icon(\r\n                    Icons.arrow_back_ios_new_rounded,\r\n                    color: Colors.transparent,\r\n                  ),\r\n                ),\r\n                Center(\r\n                  child: Text(\r\n                    \"Category\".tr(),\r\n                    style: const TextStyle(\r\n                      color: Colors.black,\r\n                      fontSize: 23,\r\n                    ),\r\n                  ),\r\n                ),\r\n                const IconButton(\r\n                  onPressed: null,\r\n                  icon: Icon(\r\n                    Icons.arrow_back_ios_new_rounded,\r\n                    color: Colors.transparent,\r\n                  ),\r\n                ),\r\n              ],\r\n            ),\r\n          ),\r\n          FutureBuilder(\r\n              future: categories,\r\n              builder: (context, snapshot) {\r\n                if (snapshot.hasData) {\r\n                  return Padding(\r\n                    padding: const EdgeInsetsDirectional.only(\r\n                        top: 5, start: 5, end: 5),\r\n                    child: CustomWhiteBox(\r\n                      width: 378,\r\n                      height: (snapshot.data!.length) * 55,\r\n                      child: SizedBox(\r\n                        height: 500,\r\n                        child: ListView.builder(\r\n                          padding: const EdgeInsetsDirectional.only(top: 5),\r\n                          physics: const NeverScrollableScrollPhysics(),\r\n                          itemBuilder: (context, index) {\r\n                            return Column(\r\n                              children: [\r\n                                ListTile(\r\n                                  onTap: () {\r\n                                    setState(() {\r\n                                      selectedIndex = index;\r\n                                      selectedCategory = snapshot.data![index];\r\n                                      Future.delayed(\r\n                                          const Duration(milliseconds: 300),\r\n                                          () {\r\n                                        Navigator.pop(\r\n                                            context, selectedCategory);\r\n                                      });\r\n                                    });\r\n                                  },\r\n                                  title: Column(\r\n                                    mainAxisAlignment: MainAxisAlignment.start,\r\n                                    crossAxisAlignment:\r\n                                        CrossAxisAlignment.start,\r\n                                    children: [\r\n                                      Row(\r\n                                        children: [\r\n                                          Text(\r\n                                            '${snapshot.data![index].name}',\r\n                                            style:\r\n                                                const TextStyle(fontSize: 20),\r\n                                          ),\r\n                                          const Spacer(),\r\n                                          selectedIndex == index\r\n                                              ? Icon(\r\n                                                  Icons.check,\r\n                                                  color: primaryColor,\r\n                                                )\r\n                                              : const SizedBox(),\r\n                                          const SizedBox(\r\n                                            width: 15,\r\n                                          )\r\n                                        ],\r\n                                      ),\r\n                                      Container(\r\n                                        margin: const EdgeInsets.only(top: 10),\r\n                                        width: MediaQuery.sizeOf(context).width,\r\n                                        height: 1,\r\n                                        color:\r\n                                            snapshot.data!.length - 1 == index\r\n                                                ? Colors.transparent\r\n                                                : Colors.grey.shade300,\r\n                                      )\r\n                                    ],\r\n                                  ),\r\n                                )\r\n                              ],\r\n                            );\r\n                          },\r\n                          itemCount: snapshot.data!.length,\r\n                        ),\r\n                      ),\r\n                    ),\r\n                  );\r\n                }\r\n                if (snapshot.hasError) {\r\n                  return Text(snapshot.error.toString());\r\n                }\r\n                return Center(\r\n                  child: SpinKitPulse(\r\n                          duration: Duration(milliseconds: 1000),\r\n                          color: Colors.grey,\r\n                          size: 40,\r\n                        ),\r\n                );\r\n              }),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}